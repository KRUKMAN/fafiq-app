stateDiagram-v2
  [*] --> Idle
  Idle --> PickingFile : pick/select file
  PickingFile --> Uploading : upload to Storage (direct or signed URL)
  Uploading --> Stored : object saved
  Stored --> Recorded : insert dog_photos/documents row
  Recorded --> Visible : queries invalidated (dog-photos, dog, dogs)
  Visible --> Idle
