stateDiagram-v2
  [*] --> SignedOutReady
  SignedOutReady --> Booting : bootstrap()
  Booting --> SignedOutReady : no Supabase session/config
  Booting --> AuthedNoOrg : session exists, memberships=[]
  Booting --> OrgActive : session exists, activeOrgId set
  SignedOutReady --> OrgActive : signInDemo()
  SignedOutReady --> Booting : signIn()/signUp()
  AuthedNoOrg --> SignedOutReady : signOut()
  OrgActive --> SignedOutReady : signOut()
  OrgActive --> OrgSwitch : switchOrg()
  OrgSwitch --> OrgActive : activeOrgId persisted + queries invalidated
